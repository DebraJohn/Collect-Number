{"version":3,"sources":["core/event.js","core/storage.js","core/chance.js","components/CollectBoard/numberToIcon.js","components/CollectBoard/index.js","components/Dice/index.js","components/Footer/index.js","App.js","index.js"],"names":["core_event","EventEmitter","saveGame","boardData","key","val","JSON","stringify","localStorage","setItem","concat","getGame","parse","getItem","getRecord","createRandomNumber","rule","basic","arguments","length","undefined","newArr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","item","value","num","chance","i","push","err","return","Math","random","createChanceArr","numberToIcon","1","2","4","8","16","32","64","128","256","512","1024","2048","4096","8192","16384","32768","65536","131072","262144","CollectBoard","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","colNum","vacentArea","state","blockNum","toggle","prevPos","_this2","_this$state","blocks","map","row","vIndex","hIndex","react_default","a","createElement","className","onClick","handleChess","isArrayEqual","_this3","eventEmitter","Emitter","addListener","recievedNewNumber","deleteListener","setState","v","h","switchChess","currentPos","targetPos","cX","cY","tX","tY","currentValue","targetValue","arrA","arrB","toString","findVacentPos","x","y","result","findIndex","React","Component","Dice","delete","summon","emit","Footer","App","Dice_Dice","CollectBoard_CollectBoard","Footer_Footer","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.75623ddc.chunk.js","sourcesContent":["import EventEmitter from \"events\";\nexport default new EventEmitter();","const saveRecord = (key, val) => {\n  localStorage.setItem(`collectGame_${key}`, val)\n}\n\nconst getRecord = (key) => {\n  return localStorage.getItem(`collectGame_${key}`)\n}\n\nexport const saveGame = (boardData) => {\n  saveRecord('testPlayer1', JSON.stringify(boardData))\n}\n\nexport const getGame = (key) => {\n  return JSON.parse(getRecord(key))\n}","const createChanceArr = (rule, basic = 100) => {\n  let newArr = [];\n  for (const item of rule) {\n    const { num, chance } = item;\n    for (let i = 0; i < chance * basic; i++) {\n      newArr.push(num);\n    }\n  }\n  return newArr[~~(Math.random() * newArr.length)];\n}\n\nexport const createRandomNumber = () => {\n  const chanceRule = [\n    { num: 1, chance: 0.55 },\n    { num: 2, chance: 0.3 },\n    { num: 4, chance: 0.1 },\n    { num: 8, chance: 0.05 }\n  ]\n  return createChanceArr(chanceRule)\n}","// export const numberToIcon = {\n//   '1': 'xiaojitui',\n//   '2': 'baiputaogan',\n//   '4': 'shousimianbao',\n//   '8': 'zhurouchang',\n//   '16': 'yaoguo',\n//   '32': 'caomei',\n//   '64': 'baocuibinggan',\n//   '128': 'naiyouxiaweiyiguo',\n//   '256': 'mangguo',\n//   '512': 'songzi',\n//   '1024': 'banli',\n//   '2048': 'zhenzi',\n//   '4096': 'hongzao',\n//   '8192': 'huafubing',\n//   '16384': 'manyuemeiquqi',\n//   '32768': 'shanbei',\n//   '65536': 'bigenguo',\n//   '131072': 'kaixinguo',\n//   '262144': 'guaziren'\n// };\n\nexport const numberToIcon = {\n  '1': 'cake',\n  '2': 'pizza',\n  '4': 'popsicle',\n  '8': 'doughnut',\n  '16': 'macaron',\n  '32': 'sushi',\n  '64': 'hotdog',\n  '128': 'bread',\n  '256': 'chips',\n  '512': 'taco',\n  '1024': 'strawberry',\n  '2048': 'cookie',\n  '4096': 'pistachio',\n  '8192': 'popcorn',\n  '16384': 'pecan',\n  '32768': 'pudding',\n  '65536': 'mochi',\n  '131072': 'eggyolkcake',\n  '262144': 'cashew'\n};\n","import React from 'react';\nimport './index.css'\nimport Emitter from '../../core/event'\nimport { saveGame, getGame } from '../../core/storage'\nimport { createRandomNumber } from '../../core/chance'\nimport { numberToIcon } from './numberToIcon'\n\nexport default class CollectBoard extends React.Component {\n  constructor() {\n    super();\n    this.colNum = 3\n    this.vacentArea = this.colNum * this.colNum\n    this.state = {\n      blockNum: getGame('testPlayer1') || [\n        [1, 0, 0],\n        [0, 0, 0],\n        [0, 0, 0]\n      ],\n      toggle: 0\n    }\n    this.prevPos = []\n    this.toggle = 0 // 1-拿起  0-放下\n  }\n  render() {\n    const { blockNum, toggle } = this.state;\n    const blocks = blockNum.map((row, vIndex) => (\n      row.map((item, hIndex) => (\n        <div className=\"block\" key={vIndex * this.colNum + hIndex} onClick={() => this.handleChess(vIndex, hIndex)}>\n          { item ? \n            <div>\n              <span className={`number${this.isArrayEqual(this.prevPos, [vIndex, hIndex]) && toggle ? ' lifted': ''}`}>\n                <i className={`icon ${numberToIcon[item]}`}></i>\n              </span>\n            </div>\n          : '' }\n        </div>))\n    ))\n    return <div className=\"collect-board\">\n      {blocks}\n    </div>\n  }\n  componentDidMount() {\n    this.eventEmitter = Emitter.addListener('sendNumber', val => {\n      this.recievedNewNumber(val);\n    });\n    this.deleteListener = Emitter.addListener('deleteNumber', () => {\n      this.setState({\n        blockNum: [[0, 0, 0],\n        [0, 0, 0],\n        [0, 0, 0]]\n      })\n    });\n\n    // this.timer = setInterval(() => {\n    //   this.vacentArea === 0 && clearInterval(this.timer)\n    //   this.recievedNewNumber(createRandomNumber())\n    // }, 1000)\n  }\n  handleChess(v, h) {\n    const { toggle } = this.state;\n    toggle ? this.switchChess(this.prevPos, [v, h]) : this.prevPos = [v, h]\n    this.setState({ toggle: !toggle })\n  }\n\n  switchChess(currentPos, targetPos) {\n    if (this.isArrayEqual(currentPos, targetPos)) return // 拿起和放下如果是相同位置 则不处理\n\n    const { blockNum } = this.state;\n    const cX = currentPos[0], cY = [currentPos[1]]\n    const tX = targetPos[0], tY = [targetPos[1]]\n    const currentValue = blockNum[cX][cY], targetValue = blockNum[tX][tY]\n\n    // 相同数字合并，不同数字交换位置\n    blockNum[cX][cY] = currentValue !== targetValue \n        ? [targetValue, blockNum[tX][tY] = currentValue][0]\n        : [0, blockNum[tX][tY] = targetValue + currentValue][0]\n    \n    this.setState({ blockNum })\n    saveGame(blockNum)\n  }\n\n  isArrayEqual(arrA = [], arrB = []) {\n    return arrA.toString() === arrB.toString()\n  }\n\n  recievedNewNumber(val) {\n    const { blockNum } = this.state\n    const vacentPos = this.findVacentPos()\n    if (vacentPos) {\n      const x = this.findVacentPos()[0], y = this.findVacentPos()[1]\n      blockNum[x][y] = val;\n      this.setState({ blockNum })\n    } else {\n      // todo\n      this.vacentArea = 0\n    }\n  }\n  findVacentPos() {\n    const { blockNum } = this.state\n    for (let i in blockNum) {\n      const result = blockNum[i].findIndex(value => value === 0)\n      if(result !== -1) {\n        return [i, result]\n      }\n    }\n  }\n}","import React from 'react';\nimport './index.css';\nimport { createRandomNumber } from '../../core/chance';\nimport Emitter from '../../core/event';\n\nexport default class Dice extends React.Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n  render() {\n    return (\n      <div className=\"topActions\">\n        <div className=\"delete\" onClick={() => this.delete()}>\n          <i className=\"icon trashBin\" />\n          <span>重置</span>\n        </div>\n        <div className=\"dice\" onClick={() => this.summon()}>\n          <i className=\"icon weibolu\" />\n          <span>来一发</span>\n        </div>\n      </div>\n    );\n  }\n  summon() {\n    Emitter.emit('sendNumber', createRandomNumber());\n  }\n  delete() {\n    Emitter.emit('deleteNumber', 'reStart');\n  }\n}\n","import React from 'react';\nimport './index.css';\n\nexport default class Footer extends React.Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n  render() {\n    return (\n      <div className=\"footer\">\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport CollectBoard from './components/CollectBoard'\nimport Dice from './components/Dice'\nimport Footer from './components/Footer'\nimport './App.css'\nimport './assets/icon.css'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Dice />\n      <CollectBoard />\n      <Footer />\n      {/* TODO: 九宫格组件、抽奖、画册 */}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}